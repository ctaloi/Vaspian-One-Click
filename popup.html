<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vaspian One Click</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <img src="vaspian-just-logo.png" alt="Vaspian Logo" class="logo" width="32" height="32">
        <h1>Vaspian One Click</h1>
        <div class="status-indicator" id="connectionStatus">
          <div class="status-dot"></div>
          <span>Ready</span>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="dial">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
        </svg>
        Dial
      </button>
      <button class="tab-btn" data-tab="history">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        History
      </button>
      <button class="tab-btn" data-tab="settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
        Settings
      </button>
      <button class="tab-btn" data-tab="logs">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/>
          <line x1="16" y1="17" x2="8" y2="17"/>
          <polyline points="10 9 9 9 8 9"/>
        </svg>
        Logs
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Dial Tab -->
      <div class="tab-pane active" id="dial">
        <div id="notReadyMessage" class="not-ready-message" style="display: none;">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          <h3>Not Ready</h3>
          <p>Please configure your credentials in Settings to start making calls.</p>
          <button type="button" class="btn btn-primary" id="goToSettings">Go to Settings</button>
        </div>
        <form id="dialForm">
          <div class="dial-container">
            <div class="phone-input-wrapper">
              <input type="tel" id="phoneNumber" placeholder="Enter phone number" required autocomplete="off">
              <button type="button" class="clear-btn" id="clearPhone" style="display: none;">×</button>
            </div>
            <button type="submit" class="btn btn-call">
              Make a Call
            </button>
          </div>
        </form>
        <div id="dialStatus" class="status"></div>

        <!-- Inline History (for sidebar mode) -->
        <div class="sidebar-inline-history">
          <div class="history-header">
            <h3>Call History</h3>
            <div class="history-actions">
              <button class="btn-icon" id="exportHistoryInline" title="Export as CSV" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                  <polyline points="7 10 12 15 17 10"/>
                  <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
              </button>
              <button class="btn-icon" id="clearHistoryInline" title="Clear history" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="3 6 5 6 21 6"/>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                  <line x1="10" y1="11" x2="10" y2="17"/>
                  <line x1="14" y1="11" x2="14" y2="17"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="history-container" id="historyContainerInline">
            <div class="history-empty">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              <p>No call history yet</p>
              <span>Calls you make will appear here</span>
            </div>
          </div>
        </div>
      </div>

      <!-- History Tab -->
      <div class="tab-pane" id="history">
        <div class="history-header">
          <h3>Call History</h3>
          <div class="history-actions">
            <button class="btn-icon" id="exportHistory" title="Export as CSV" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
            </button>
            <button class="btn-icon" id="clearHistory" title="Clear history" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="history-container" id="historyContainer">
          <div class="history-empty">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <p>No call history yet</p>
            <span>Calls you make will appear here</span>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-pane" id="settings">
        <!-- Help Section -->
        <div class="help-section">
          <button type="button" class="help-toggle" id="helpToggle">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            How to Use Vaspian One Click
            <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="help-content" id="helpContent" style="display: none;">
            <div class="help-intro">
              <h4>Quick Start</h4>
              <ol>
                <li>Enter your Vaspian tenant, extension, and password below</li>
                <li>Click "Save Settings" to verify your credentials</li>
                <li>Go to the Dial tab and enter a phone number, or click any phone number on a web page</li>
              </ol>
            </div>

            <div class="help-section-item">
              <h4>📞 Making Calls</h4>
              <p><strong>From the Extension:</strong></p>
              <ul>
                <li>Open the extension and go to the Dial tab</li>
                <li>Enter or paste any phone number (formatting is automatic)</li>
                <li>Click "Make a Call" - your phone will ring first, then connect to the number</li>
              </ul>
              <p><strong>From Web Pages:</strong></p>
              <ul>
                <li>Phone numbers on web pages are automatically detected</li>
                <li>Hover over a phone number to see a subtle orange highlight</li>
                <li>Click any phone number to instantly dial</li>
                <li>A notification will confirm the call is being placed</li>
              </ul>
            </div>

            <div class="help-section-item">
              <h4>🔢 Dial Prefix</h4>
              <p>The extension adds a prefix before dialed numbers for external calls:</p>
              <ul>
                <li><strong>Prefix with 8:</strong> Adds "8" before the number (e.g., 85551234567) - <strong>Default</strong></li>
                <li><strong>Prefix with 9:</strong> Adds "9" before the number (e.g., 95551234567)</li>
                <li><strong>No prefix:</strong> Direct dialing</li>
              </ul>
              <p class="help-note">Defaults to "8" which works for most Vaspian configurations. Your prefix setting is preserved even after logout.</p>
            </div>

            <div class="help-section-item">
              <h4>📱 Sidebar Mode</h4>
              <p>Toggle "Open in Sidebar" to pin the extension to your browser's sidebar:</p>
              <ul>
                <li>Keeps the dialer accessible while browsing</li>
                <li>Shows call history inline below the dial pad</li>
              </ul>
            </div>

            <div class="help-section-item">
              <h4>📋 Call History</h4>
              <ul>
                <li>Your last 500 calls are saved automatically</li>
                <li>Click the redial button (📞) next to any number to call it again</li>
                <li>Click anywhere else on a call to add or edit notes</li>
                <li>Export your call history as a CSV file with the export button</li>
                <li>Use "Clear history" to remove all saved calls</li>
                <li>History is cleared when you logout</li>
              </ul>
            </div>

            <div class="help-section-item">
              <h4>📝 Call Notes</h4>
              <p>Add notes to your calls to track important details:</p>
              <ul>
                <li><strong>Add a note:</strong> Click on any call in your history to open the note editor</li>
                <li><strong>Inline editing:</strong> The note field appears right below the call you clicked</li>
                <li><strong>Save or delete:</strong> Use the Save button to keep your note, or Delete to remove it</li>
                <li><strong>Close editor:</strong> Click the same call again to close the note editor</li>
                <li><strong>Notes in export:</strong> Your notes are included when you export call history to CSV</li>
              </ul>
              <p class="help-note">Notes are stored locally and will be cleared when you logout.</p>
            </div>

            <div class="help-section-item">
              <h4>🔧 Debug Logging</h4>
              <p>Enable "Debug Logging" to troubleshoot issues:</p>
              <ul>
                <li>Shows detailed activity logs in the Logs tab</li>
                <li>Helpful when calls aren't going through</li>
                <li>Can be shared with support for troubleshooting</li>
              </ul>
            </div>

            <div class="help-section-item">
              <h4>🚪 Logout</h4>
              <p>Click "Logout" to:</p>
              <ul>
                <li>Clear your saved credentials</li>
                <li>Remove all call history</li>
                <li>Clear session cookies</li>
              </ul>
            </div>

            <div class="help-section-item">
              <h4>💬 Need Help?</h4>
              <p>Contact Vaspian for assistance:</p>
              <ul>
                <li><strong>Email:</strong> <a href="mailto:support@vaspian.com" style="color: #E66825; text-decoration: none;">support@vaspian.com</a></li>
                <li><strong>Phone:</strong> <a href="#" class="support-phone-link" data-phone="7169612120" style="color: #E66825; text-decoration: none;">716-961-2120</a></li>
              </ul>
              <p class="help-note">We're here to help with any questions or issues you may have.</p>
            </div>
          </div>
        </div>

        <!-- Display Preferences Card -->
        <div class="settings-card">
          <div class="card-header">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <span>Display</span>
          </div>
          <label class="toggle-label">
            <input type="checkbox" id="useSidebar" class="toggle-checkbox">
            <span class="toggle-slider"></span>
            <span class="toggle-text">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <line x1="9" y1="3" x2="9" y2="21"/>
              </svg>
              Open in Sidebar
            </span>
          </label>
          <p class="setting-description">Open extension in sidebar instead of popup</p>
        </div>

        <!-- Settings Form -->
        <form id="settingsForm">
          <!-- Credentials Card - Not Logged In -->
          <div class="settings-card" id="credentialsLoginCard">
            <div class="card-header">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <span>Credentials</span>
            </div>
            <p class="card-description">Enter your Vaspian Phone System credentials</p>
            <div class="credentials-fields">
              <input type="text" id="tenant" placeholder="Tenant (e.g., vaspian)">
              <input type="text" id="extension" placeholder="Extension (e.g., 188)">
              <input type="password" id="password" placeholder="Password">
            </div>
            <button type="submit" class="btn btn-primary">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              Login
            </button>
          </div>

          <!-- Credentials Card - Logged In -->
          <div class="settings-card" id="credentialsLoggedInCard" style="display: none;">
            <div class="card-header">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              <span>Account</span>
            </div>
            <div class="logged-in-info">
              <div class="account-info">
                <div class="account-label">Tenant</div>
                <div class="account-value" id="loggedInTenant">-</div>
              </div>
              <div class="account-info">
                <div class="account-label">Extension</div>
                <div class="account-value" id="loggedInExtension">-</div>
              </div>
            </div>
            <button type="button" class="btn btn-logout" id="logoutBtnLoggedIn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16 17 21 12 16 7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
              Logout
            </button>
          </div>
        </form>
        <div id="settingsStatus" class="status"></div>

        <!-- Support Section -->
        <div class="support-section">
          <h4>💬 Need Help?</h4>
          <p>Contact Vaspian for assistance:</p>
          <div class="support-contact">
            <div class="support-item">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
              <a href="mailto:support@vaspian.com">support@vaspian.com</a>
            </div>
            <div class="support-item">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
              </svg>
              <a href="#" class="support-phone-link" data-phone="7169612120">716-961-2120</a>
            </div>
          </div>
        </div>

        <!-- Advanced Settings -->
        <div class="advanced-section">
          <button type="button" class="advanced-toggle" id="advancedToggle">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
            Advanced Settings
            <svg class="chevron" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="advanced-content" id="advancedContent" style="display: none;">
            <div class="advanced-field">
              <label for="dialPrefix">Dial Prefix</label>
              <div class="select-wrapper">
                <select id="dialPrefix">
                  <option value="">No prefix</option>
                  <option value="8">Prefix with 8</option>
                  <option value="9">Prefix with 9</option>
                </select>
              </div>
              <p class="field-description">Prefix for external calls (defaults to "8"; persists after logout)</p>
            </div>

            <div class="advanced-field">
              <label class="toggle-label">
                <input type="checkbox" id="debugLogging" class="toggle-checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-text">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="4 17 10 11 4 5"/>
                    <line x1="12" y1="19" x2="20" y2="19"/>
                  </svg>
                  Enable Debug Logging
                </span>
              </label>
              <p class="field-description">Show detailed activity logs for troubleshooting</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Logs Tab -->
      <div class="tab-pane" id="logs">
        <div class="logs-header">
          <h3>Activity Logs</h3>
          <div class="logs-controls">
            <button class="btn-icon" id="populateTestData" title="Populate test call data">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
            </button>
            <button class="btn-icon" id="copyLogs" title="Copy logs to clipboard">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
            </button>
            <button class="btn-icon" id="refreshLogs" title="Refresh">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
              </svg>
            </button>
            <button class="btn-icon" id="clearLogs" title="Clear logs">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                <line x1="10" y1="11" x2="10" y2="17"/>
                <line x1="14" y1="11" x2="14" y2="17"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="logs-container" id="logsContainer">
          <div class="logs-empty">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.3">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10 9 9 9 8 9"/>
            </svg>
            <p>No logs yet</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Logout Confirmation Modal -->
  <div id="logoutModal" class="modal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <button type="button" class="modal-close" id="cancelLogout" title="Cancel">×</button>
      <div class="modal-header">
        <h3>You will lose your call history</h3>
        <p>Download before logging out?</p>
      </div>
      <div class="modal-actions">
        <button type="button" class="action-card" id="exportAndLogout">
          <div class="action-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </div>
          <span class="action-label">Export & Logout</span>
        </button>
        <button type="button" class="action-card action-card-secondary" id="logoutWithoutExport">
          <div class="action-icon">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
              <polyline points="16 17 21 12 16 7"/>
              <line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
          </div>
          <span class="action-label">Logout Without Export</span>
        </button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
